import q from"./4LMCIkyo.js";import A from"./B7KU8noN.js";import F from"./DEJXHsuA.js";import{f as M,q as P,s as R,v as j,g as z,c as r,a as t,x as K,i as l,l as e,b as i,w as u,t as a,F as c,o as n,d as _,k as O,j as G,_ as H}from"#entry";import J from"./C0aN81KB.js";import Q from"./DbAtcd_L.js";import{u as W}from"./DvM57Kc5.js";import{u as X}from"./BTRvYBxn.js";import{u as Y}from"./CMV05MUf.js";import"./cOAiAd2k.js";import"./CdmUVqsY.js";import"./DlraI2__.js";import"./44lpdJwz.js";import"./BJ2ClxiI.js";import"./Cd8xZgT4.js";import"./CQHT0i2j.js";import"./CHOj1P8S.js";const Z={class:"container"},tt={class:"product-details"},ot={key:0,class:"product-details__loading"},st={key:2,class:"product-details__content"},et={class:"product-details__header"},nt={class:"product-details__breadcrumb"},rt={class:"product-details__actions"},at={class:"product-details__main"},it={class:"product-details__image-container"},dt=["src","alt"],lt={key:1,class:"product-details__image-placeholder"},ct={class:"product-details__info"},ut={class:"product-details__header-info"},_t={key:0,class:"product-details__brand"},mt={class:"product-details__title"},pt={class:"product-details__price"},ft={key:0,class:"product-details__description"},vt={class:"product-details__specs"},gt={class:"product-details__specs-list"},ht={key:1,class:"product-details__metadata"},kt={class:"product-details__metadata-list"},yt=M({__name:"[id]",setup(xt){const h=P(),f=parseInt(h.params.id);if(isNaN(f))throw R({statusCode:404,statusMessage:"Product not found"});const{product:s,error:k,isLoading:y,hasError:x,formattedPrice:C,formattedDate:b,goToEdit:w,goToList:U}=W(f),B=j(),v=X();z({title:()=>s.value?`${s.value.name} - Каталог продуктов`:"Продукт - Каталог продуктов",description:()=>s.value?.description||"Просмотр продукта в каталоге"});const D=d=>{switch(d.toLowerCase()){case"active":case"активный":return"green";case"inactive":case"неактивный":return"red";case"pending":case"ожидает":return"yellow";default:return"gray"}},N=d=>new Intl.DateTimeFormat("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(d)),$=d=>({Цвет:"Цвет",Бренд:"Бренд",Артикул:"Артикул","Цена, руб.*":"Цена (руб.)","Цена, руб.":"Цена (руб.)","Название товара":"Название товара","Страна-изготовитель":"Страна-изготовитель",color:"Цвет",brand:"Бренд",sku:"Артикул",price:"Цена",name:"Название",country:"Страна"})[d]||d,E=async()=>{if(!(!s.value||!confirm(`Вы уверены, что хотите удалить продукт "${s.value.name}"?`)))try{await Y().products.delete(s.value.id),v.add({title:"Продукт удален",description:`Продукт "${s.value.name}" успешно удален`,color:"green"}),B.push("/products")}catch(o){v.add({title:"Ошибка",description:o instanceof Error?o.message:"Не удалось удалить продукт",color:"red"})}};return(d,o)=>{const m=q,I=A,p=F,T=O,L=J,S=Q;return n(),r("div",Z,[t("div",tt,[e(y)?(n(),r("div",ot,[i(m,{class:"h-8 w-64 mb-4"}),i(m,{class:"h-64 w-full mb-6"}),i(m,{class:"h-32 w-full"})])):e(x)?(n(),K(I,{key:1,icon:"heroicons:exclamation-triangle",color:"red",variant:"soft",title:e(k)||"Продукт не найден","close-button":{icon:"heroicons:x-mark-20-solid",color:"red",variant:"link"},onClose:e(U)},null,8,["title","onClose"])):e(s)?(n(),r("div",st,[t("div",et,[t("div",nt,[i(p,{to:"/products",variant:"ghost",icon:"heroicons:arrow-left",size:"sm"},{default:u(()=>[...o[0]||(o[0]=[_(" К списку продуктов ",-1)])]),_:1})]),t("div",rt,[i(p,{variant:"outline",icon:"heroicons:pencil",onClick:e(w)},{default:u(()=>[...o[1]||(o[1]=[_(" Редактировать ",-1)])]),_:1},8,["onClick"]),i(p,{color:"red",variant:"outline",icon:"heroicons:trash",onClick:E},{default:u(()=>[...o[2]||(o[2]=[_(" Удалить ",-1)])]),_:1})])]),t("div",at,[t("div",it,[e(s).imageUrl?(n(),r("img",{key:0,src:e(s).imageUrl,alt:e(s).name,class:"product-details__image"},null,8,dt)):(n(),r("div",lt,[i(T,{name:"heroicons:photo",size:"96"}),o[3]||(o[3]=t("p",null,"Изображение отсутствует",-1))]))]),t("div",ct,[t("div",ut,[e(s).brand?(n(),r("div",_t,a(e(s).brand),1)):l("",!0),t("h1",mt,a(e(s).name),1),t("div",pt,a(e(C)),1)]),e(s).description?(n(),r("div",ft,[o[4]||(o[4]=t("h2",null,"Описание",-1)),t("p",null,a(e(s).description),1)])):l("",!0),t("div",vt,[o[11]||(o[11]=t("h2",null,"Характеристики",-1)),t("dl",gt,[e(s).sku?(n(),r(c,{key:0},[o[5]||(o[5]=t("dt",null,"Артикул",-1)),t("dd",null,a(e(s).sku),1)],64)):l("",!0),e(s).category?(n(),r(c,{key:1},[o[6]||(o[6]=t("dt",null,"Категория",-1)),t("dd",null,a(e(s).category),1)],64)):l("",!0),e(s).quantity!==void 0?(n(),r(c,{key:2},[o[7]||(o[7]=t("dt",null,"Количество",-1)),t("dd",null,a(e(s).quantity)+" шт.",1)],64)):l("",!0),e(s).status?(n(),r(c,{key:3},[o[8]||(o[8]=t("dt",null,"Статус",-1)),t("dd",null,[i(L,{color:D(e(s).status),variant:"soft"},{default:u(()=>[_(a(e(s).status),1)]),_:1},8,["color"])])],64)):l("",!0),o[9]||(o[9]=t("dt",null,"Дата создания",-1)),t("dd",null,a(e(b)),1),o[10]||(o[10]=t("dt",null,"Последнее обновление",-1)),t("dd",null,a(N(e(s).updatedAt)),1)])]),e(s).metadata&&Object.keys(e(s).metadata).length>0?(n(),r("div",ht,[o[12]||(o[12]=t("h2",null,"Дополнительные данные",-1)),i(S,{class:"metadata-card"},{default:u(()=>[t("dl",kt,[(n(!0),r(c,null,G(e(s).metadata,(V,g)=>(n(),r(c,{key:g},[t("dt",null,a($(g)),1),t("dd",null,a(V),1)],64))),128))])]),_:1})])):l("",!0)])])])):l("",!0)])])}}}),Mt=H(yt,[["__scopeId","data-v-35bd86b9"]]);export{Mt as default};
