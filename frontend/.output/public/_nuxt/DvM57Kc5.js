import{u as T}from"./CMV05MUf.js";import{v as U,r as i,m as c,y as b,z as v}from"#entry";const F=l=>{console.log("üîß useProduct –≤—ã–∑–≤–∞–Ω —Å ID:",l);const n=T(),d=U(),a=i(null),t=i("idle"),u=i(null),s=c(()=>{if(typeof l=="number")return l;if(l&&"value"in l)return l.value}),g=async r=>{const e=r||s.value;if(console.log("üì• fetchProduct –≤—ã–∑–≤–∞–Ω. Target ID:",e,"–ü–µ—Ä–µ–¥–∞–Ω–Ω—ã–π ID:",r,"id.value:",s.value),!e){console.log("‚ùå ID –ø—Ä–æ–¥—É–∫—Ç–∞ –Ω–µ —É–∫–∞–∑–∞–Ω"),u.value="ID –ø—Ä–æ–¥—É–∫—Ç–∞ –Ω–µ —É–∫–∞–∑–∞–Ω";return}try{t.value="loading",u.value=null;const o=await n.products.getById(e);console.log("‚úÖ –¢–æ–≤–∞—Ä –ø–æ–ª—É—á–µ–Ω –∏–∑ API:",o),a.value=o,console.log("‚úÖ product.value —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω:",a.value),t.value="success",console.log("‚úÖ loading —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ success")}catch(o){t.value="error",u.value=o instanceof Error?o.message:"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞",console.error("Error fetching product:",o)}},f=async r=>{try{t.value="loading",u.value=null;const e=await n.products.create(r);return a.value=e,t.value="success",e}catch(e){return t.value="error",u.value=e instanceof Error?e.message:"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏",console.error("Error creating product:",e),null}},m=async(r,e)=>{try{t.value="loading",u.value=null;const o=await n.products.update(r,e);return a.value=o,t.value="success",{success:!0,data:o}}catch(o){return t.value="error",u.value=o instanceof Error?o.message:"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏",console.error("Error updating product:",o),{success:!1,error:o instanceof Error?o.message:"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏"}}},p=async()=>{const r=s.value;if(!r)return u.value="ID –ø—Ä–æ–¥—É–∫—Ç–∞ –Ω–µ —É–∫–∞–∑–∞–Ω",!1;try{return t.value="loading",u.value=null,await n.products.delete(r),a.value=null,t.value="success",!0}catch(e){return t.value="error",u.value=e instanceof Error?e.message:"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏",console.error("Error deleting product:",e),!1}},y=async r=>{if(s.value){const e=await m(s.value,r);return e.success&&e.data||null}else return await f(r)},h=()=>{a.value&&d.push(`/products/${a.value.id}-edit`)},P=()=>{d.push("/products")},E=c(()=>t.value==="loading"),w=c(()=>t.value==="error"),D=c(()=>!s.value),I=c(()=>!!s.value&&!!a.value),A=c(()=>a.value?.price?new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}).format(a.value.price):"–¶–µ–Ω–∞ –Ω–µ —É–∫–∞–∑–∞–Ω–∞"),R=c(()=>a.value?.createdAt?new Intl.DateTimeFormat("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(a.value.createdAt)):"");return b(s,r=>{console.log("üëÅÔ∏è Watch —Å—Ä–∞–±–æ—Ç–∞–ª! –ù–æ–≤—ã–π ID:",r),r?g(r):console.log("‚ö†Ô∏è ID –ø—É—Å—Ç–æ–π, –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–µ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞")},{immediate:!0}),{product:v(a),loading:v(t),error:v(u),isLoading:E,hasError:w,isNew:D,isExisting:I,formattedPrice:A,formattedDate:R,fetchProduct:g,createProduct:f,updateProduct:m,deleteProduct:p,saveProduct:y,goToEdit:h,goToList:P}};export{F as u};
